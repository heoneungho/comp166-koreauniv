#summary 같은 그림 맞추기 게임!
#labels 2013190726임태휘

= Introduction =

4x4 칸의 카드들(8쌍)이 랜덤으로 뒤집은 채로 배치한 뒤, 게임 시작과 동시에 타이머가 작동합니다. 같은 그림의 카드를 연속으로 눌러서 모든 쌍을 찾아내는 게임입니다. 옵션 변경을 통해서 원하시는 그림 이미지로도 게임을 하실 수 있습니다.   

저는 게임도 게임이지만 어플리케이션 내의 부가적인 기능들에 초점을 맞추어 보았습니다. 실제 마켓에서 게임을 받게 되면 여러가지 옵션들이 게임 내에 존재하며, 각 옵션들은 단순 게임자체가 주는 재미에 버금가는 추가적인 흥미를 더해줍니다. 바로 이러한 점에 저의 이번 어플리케이션 개발 의도가 담겨있습니다. 

= 개발의 목적 및 필요성 =

http://comp166-koreauniv.googlecode.com/files/잉여.png


 귀가 시간이나 애매하게 남은 공강시간 참으로 따분하셨죠? 

 그래서 제가 여러분을 위해 준비했습니다. 정답은 바로 같은 그림 맞추기 게임!! 
 
 요즘 스마트폰 게임의 추세에 맞게 *재미*와 더불어 *조작의 단순함*, *짧은 진행시간*을 모두 갖춘 게임입니다. 

 게다가 기억력 강화에 도움을 줄 수 있기 때문에 치매를 예방하고자하시는 어르신들이나 갱년기를 앞두고 기억력 감퇴가 걱정되시는 부모님들께 상당히 유용한 게임입니다. 물론 유아들의 기억력 강화에도 도움이 되겠죠? 

 이와 같은 장점들만 모았습니다. "모두의 매칭"을 여러분께 소개합니다.     

= Requirment = 
 
 * Start Game 버튼 : 

1. Game Activity로 이동한다.

2. 4x4의 게임이 만들어짐과 동시에 타이머가 작동한다.

3. Game Activity 내의 Resume, Stop 버튼으로 게임을 멈추기, 재개하기가 가능하다. 

4. 7위내의 기록 경신 시 랭킹 닉네임 작성화면이 나타난다.
<br>            
<br>    
<br>
 * Option 버튼 :

1. Option Activity로 이동한다.<br>
<br>               
2. BGM on&off 기능, 카드 Image 변경 기능, 랭킹 초기화 기능 제공한다.
<br>
<br>
<br>
 * Ranking 버튼 : 

1. Ranking Activity로 이동한다.

2. 1위부터 7위까지의 랭커들의 닉네임을 순서대로 제공한다.  

= 게임의 구성(각 화면 구성 설명 및 버튼들의 기능 설명) =

자! 이제 본격적으로 본인이 만든 게임의 화면 구성 살펴보도록 하겠다.

== 메인 화면(Main Activity) == 


http://comp166-koreauniv.googlecode.com/files/메인화면1.png


http://comp166-koreauniv.googlecode.com/files/메인화면2.png


 * 첫 화면인 메인화면은 메인 로고와 3개의 버튼으로 구성되어 있다.

 * 메인로고는 가로와 세로 방향으로 80%~ 120%로 축소와 증가를 반복하도록 구성하였고, 반짝이는 것 같은 모습을 연출하기 위해 투명도의 변화를 그에 맞게 설정하였다. 

 * 각 버튼은 각 화면으로 이동하게 해주는 기능을 담당한다.

 * 추가적으로 좋아하는 배경음악을 BGM으로 설정해보았다. 노래 정보 : Better Together-Jack Johnson

== 옵션 화면(Option Activity) ==


http://comp166-koreauniv.googlecode.com/files/옵화.png


 * 옵션 화면은 사운드 on&off toggle 버튼, 카드 교체 radio 버튼, 랭킹 리셋 버튼으로 구성되어 있다. 

 * 사운드 on&off toggle 버튼은 처음에 사운드가 on의 상태로 실행되며 클릭 시 off로 바뀌면서 사운드가 멈춘다. 

 * 사운드의 재생방식은 모든 Activity에서 연결되도록 설정하였다. 따라서 모든 클래스에 onResume 메소드와 onPause 메소드를 동일하게 구성함으로써 사운드가 어디서나 연결되어 들리도록 하였다.

 * 각 카드의 종류에 따라 게임 화면의 카드가 변경된다. 

 * 랭킹 리셋 버튼을 누르면 랭킹에 있던 목록이 모두 설정된 초기값으로 초기화된다.

== 카드의 종류별 게임 화면 ==

 * 교수님카드

http://comp166-koreauniv.googlecode.com/files/교수님카드.png

 * 동물카드

http://comp166-koreauniv.googlecode.com/files/동물카드.png

 * 숫자카드

http://comp166-koreauniv.googlecode.com/files/숫자카드.png
  

== 랭킹화면과 랭킹 리셋 버튼의 동작 확인 ==


 * 랭킹화면


http://comp166-koreauniv.googlecode.com/files/랭킹화면.png


 * 랭킹 초기화화면


http://comp166-koreauniv.googlecode.com/files/랭초화.png


== 게임 화면(Game Activity) ==

 
http://comp166-koreauniv.googlecode.com/files/동물카드.png


 * 게임 화면은 타이머, 카드, 버튼들로 구성되어 있다.

 * 타이머는 게임 시작과 동시에 작동하고, 모든 8쌍의 카드를 맞추면 바로 정지하도록 설정되어 있다. 

 * 각 버튼들에 의해 급한 일이 생긴 경우 정지할 수 있고, 일이 마무리되고 나면 다시 재개가 가능하며, 패가 좋지 않다고 생각되면 새 게임을 진행할 수 있다.


== 게임 화면 내에서 랭킹 진입 성공과 실패 시 결과 화면 ==


 * 랭킹 진입 성공 화면

 * 닉네임을 작성하고 Save 버튼을 누르면 랭킹화면으로 넘어가서 랭킹을 확인할 수 있다. 


http://comp166-koreauniv.googlecode.com/files/성공화면.png



 * 랭킹 진입 실패 화면

 * 실패 화면을 누르면 메인 화면으로 넘어간다.


http://comp166-koreauniv.googlecode.com/files/실패화면.png


= 패키지와 클래스 그리고 레이아웃 =


 * 패키지와 클래스


http://comp166-koreauniv.googlecode.com/files/패키지클래스.png


 패키지는 게임 화면을 구성하는 클래스들이 담긴 기본 패키지, 게임 화면 내의 동작과 관련된 패키지, 그리고 그 밖의 기능을 담당하는 유틸리티 패키지로 구성되어 있다.


 * res 폴더 내의 구성

http://comp166-koreauniv.googlecode.com/files/리쏘쓰.png


 * 제일 위에 보이는 anim 폴더는 메인 로고의 동작을 정의해주는 xml 파일이 들어 있다.

 * drawable-xhdpi 내에 어플리케이션 내과 관련된 이미지들을 모두 저장하였다.

 * layout 폴더 내에는 기본 패키지내의 클래스를 구성하는 화면에 대한 xml 파일이 들어 있다.

 * 마지막으로 raw 폴더에는 BGM으로 재생되는 음악 파일이 담겨 있다.


= 각 클래스에 대한 설명 =


== 게임 클래스와 xml ==

{{{
<게임 클래스>
package com.example.matchinggame;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.matchinggame.game.CardManager;
import com.example.matchinggame.game.GameManager;
import com.example.matchinggame.game.GenerateRandom;
import com.example.matchinggame.game.TimeManager;
import com.example.matchinggame.utils.ManagerPreference;
import com.example.matchinggame.utils.ManagerSound;

public class GameActivity extends Activity implements OnClickListener{
	public static final String mPackage="com.example.matchinggame";
	public static final int CARD_SIZE=16;
	
	public CardManager[] Card; 
	
	public static final int IN_GAME=1; // 현재 게임의 진행 상태를 나타내는 변수들
	public static final int PAUSE_GAME=2;
	public static final int FINISH_GAME=3;
	public static final int TIME_INTERVEL=90; // 시간 정보 호출 간격
	public int NowGameStatus;
	
	
	TimeManager tm;
	TextView tv_time;

	public static final int MSG_FIRST_CARD_TURN=0; // 맨 처음 게임 시작 시 카드들을 전체적으로 보여주기 위한 변수
	public static final int FIRST_CARD_TURN_TIME=1500; // 카드 넘어가는데 걸리는 시간으로 보여주는 시간을 설정 : 1.5초
	public static final int MSG_TURN_CARD=1; // 게임 진행 과정에서의 2장의 카드가 서로 다른 경우 뒤집기 위한 변수
	public static final int TURN_CARD_TIME=1500;
	
	GameManager GM;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_game);
		
		mInitLayout(); 
		
		tm=new TimeManager();
		GM=new GameManager();
		
		NowGameStatus=IN_GAME;
		tm.startGame();
		
		mTimeHandler.sendEmptyMessageDelayed(NowGameStatus, TIME_INTERVEL);
		mGameHandler.sendEmptyMessageDelayed(MSG_FIRST_CARD_TURN, FIRST_CARD_TURN_TIME);
		
		findViewById(R.id.restart_btn).setOnClickListener(this);
		findViewById(R.id.pause_btn).setOnClickListener(this);
		findViewById(R.id.resume_btn).setOnClickListener(this);
		findViewById(R.id.resume_btn).setClickable(false);
	}
	
	/**
	 * xml에서 만든 값들을 소스랑 연결시켜주는 부분
	 * onCreate에 들어가면서 바로 실행되는 부분
	 */
	private void mInitLayout(){
		tv_time=(TextView)findViewById(R.id.tv_time);
		
		Card=new CardManager[CARD_SIZE]; 
		int[] randList=GenerateRandom.getRandom(CARD_SIZE); // 카드에 0~7까지의 값을 랜덤하게 생성 
		
		for(int i=0;i<CARD_SIZE;i++){
			
			int resource=0; //카드의 종류에 해당하는 변수
			
			switch (ManagerPreference.getCard()) { //옵션에서 카드를 변경하면 그것을 반영해주는 switch문
			case 0:
				resource=getResources().getIdentifier("card"+randList[i]%(CARD_SIZE/2)+randList[i]%(CARD_SIZE/2)+randList[i]%(CARD_SIZE/2),"drawable",mPackage);
				break; 
			case 1:
				resource=getResources().getIdentifier("card"+randList[i]%(CARD_SIZE/2)+randList[i]%(CARD_SIZE/2),"drawable",mPackage);
				break;
			case 2:
				resource=getResources().getIdentifier("card"+randList[i]%(CARD_SIZE/2),"drawable",mPackage);
				break;
			}
			
			Card[i]=new CardManager(
					i,
					randList[i]%(CARD_SIZE/2), 
					(ImageView)findViewById(getResources().getIdentifier("btn"+i,"id",mPackage)),
					resource);
			
			Card[i].getImageView().setOnClickListener(this);
			
			Card[i].setImage(true); // 처음에는 모든 카드가 앞면(가리개 카드)으로 나온다.
		}
		
	}
	@Override
	public void onResume(){
		super.onResume();
		NowGameStatus=IN_GAME;
		if(ManagerPreference.getSound()){
            ManagerSound.playSound(this);
        }
	}
	@Override
	public void onPause(){
		super.onPause();
		NowGameStatus=PAUSE_GAME;
		ManagerSound.pauseSound();
	}
	
	/**
	 * 게임에서 필요한 핸들러로
	 * 카드를 뒤집는 동작을 제어한다.
	 */
	Handler mGameHandler=new Handler(){
		@Override
		public void handleMessage(Message msg){
			switch (msg.what) {
			case MSG_FIRST_CARD_TURN:
				for(int i=0;i<CARD_SIZE;i++){
					Card[i].setImage(false); // 모두 뒤집어서 뒷면을 전부 보여줌.
				}
				break;
			case MSG_TURN_CARD:
				Card[GM.getTurnCardNum()[0]].setImage(false); // 터치시 카드가 넘어가는 효과
				Card[GM.getTurnCardNum()[1]].setImage(false);
				GM.canTouchCard();
				break;
			
			}
		}
	};
	/**
	 * 시간관련 부분을 제어하는 함수
	 * handleMessage에서 
	 * IN_GAME일 때,
	 * 재귀되는 내용을 받는다.
	 */
	Handler mTimeHandler=new Handler(){
		
		@Override
		public void handleMessage(Message msg){
			switch (msg.what) {
			case IN_GAME:
				tv_time.setText(tm.getNowTime());
				mTimeHandler.sendEmptyMessageDelayed(NowGameStatus, TIME_INTERVEL);
				
				break;
			case PAUSE_GAME:
				
				break;
			case FINISH_GAME:
				setResult();
				break;
			default:
			}
		}
	};

	/**
	 * 게임이 끝나면 출력되는 결과 메소드
	 * 기록이 랭킹 안에 들면 랭킹 작성 화면 출력
	 * 그렇지 않으면 게임 종료 화면 출력
	 * */
	public void setResult(){
		
		final float nowTime=Float.parseFloat(tv_time.getText().toString()); //게임의 시간 기록에 해당하는 변수
		
		if(ManagerPreference.isInRanking(nowTime)){ 
			
			findViewById(R.id.rl_result).setVisibility(View.VISIBLE); //게임 끝남과 동시에 결과 화면을 보여줌.
			
			findViewById(R.id.btn_save).setOnClickListener(new OnClickListener() {
				// save 버튼과 관련된 동작
				@Override
				public void onClick(View v) {
					// TODO Auto-generated method stub
					EditText et=(EditText)findViewById(R.id.et_name);
					ManagerPreference.setRank(et.getText().toString(), nowTime);
					Intent intent4 = new Intent(GameActivity.this,RankingActivity.class);
					startActivity(intent4);
				}
			});
			
		}else{
			findViewById(R.id.rl_result_no).setVisibility(View.VISIBLE);
			findViewById(R.id.btn_close).setOnClickListener(new OnClickListener() {
				@Override
				public void onClick(View v) {
					// TODO Auto-generated method stub
					finish();
				}
			});
		}
	}
	
	/**
	 * 게임 화면의 버튼들을 눌렀을 경우 
	 * 해당 동작들을 설정해놓은 메소드
	 * */
		@Override
	public void onClick(View v) {
		// TODO Auto-generated method stub
		switch (v.getId()) {
		case R.id.restart_btn:
			Intent intent=new Intent(GameActivity.this,GameActivity.class);
			startActivity(intent);
			overridePendingTransition(0, 0); // 바로 딜레이없이 새 게임
			finish();
			break;
		case R.id.resume_btn:
			tm.resumeTime();
			NowGameStatus=IN_GAME;
			mTimeHandler.sendEmptyMessageDelayed(NowGameStatus, 0);
			findViewById(R.id.resume_btn).setClickable(false); //resume 혹은 pause 를 두 번 누르지 못하게 설정
			findViewById(R.id.pause_btn).setClickable(true);
			break;
		case R.id.pause_btn:
			tm.pauseTime();
			NowGameStatus=PAUSE_GAME;
			findViewById(R.id.resume_btn).setClickable(true);
			findViewById(R.id.pause_btn).setClickable(false);
			break;

		default: //이 부분에서 게임 중 카드 2개씩만 뒤집기, 2개의 카드가 같은 경우와 다른 경우의 동작, 모두 맞춘 경우의 동작 등을 설정   
			if(NowGameStatus==IN_GAME){
				
				if(GM.canTurnCard()){ //카드를 뒤집을 수 있는 경우 터치한 카드의 정보를 저장
					int nowTouchCardNum=Integer.parseInt(v.getTag().toString());
					int nowTouchCardImageValue=Card[nowTouchCardNum].getValue();
					
					if(Card[nowTouchCardNum].turnCard(true)){ //똑같은 카드 혹은 이미 맞춘 카드를 누른경우 누르지 못하게 하기 위함 
						
						GM.turnCard(nowTouchCardNum,nowTouchCardImageValue);
						
						if(GM.needToReturnCard()){
							mGameHandler.sendEmptyMessageDelayed(MSG_TURN_CARD,TURN_CARD_TIME );

						}
						
						if(GM.isAllCorrect())NowGameStatus=FINISH_GAME;
					}
					
				}
			}
		}
	}
	
	

}
}}}

 * 마지막에 기재된 참고 사이트에서 카드 게임의 논리를 참고했다. 논리만 참고하고 지난 1학기때 배운 C언어의 기본 개념을 최대한 활용하여 구성하였다. 핸드폰을 연결하여 계속해서 게임을 해보면서 동작을 제어하기 위한 변수를 하나씩 추가하면서 동작의 오류를 하나 하나 수정해나갔다.

 * 일단 각 카드는 버튼으로 구성하여 터치를 인식할 수 있게 구성 하였고, 변수를 만들어 mod 계산을 통해 카드 자체를 난수 배열할 수 있는 구조로 짰다. 카드에 대한 정보는 난수 배열을 통해 얻은 수에 따라서 정보를 넘겨주게 하였다.

{{{
<게임클래스 xml>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".GameActivity" >
    
    <RelativeLayout
        android:id="@+id/top_layout"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:background="#333" >
         
    	<TextView
    	    android:id="@+id/tv_time"
    	    android:layout_width="wrap_content"
    	    android:layout_height="wrap_content"
    	    android:layout_alignParentTop="true"
    	    android:layout_centerHorizontal="true"
    	    android:text="TIMER 00:00:00"
    	    android:textColor="#FFFFFF" 
    	    />
    </RelativeLayout>
    
	<RelativeLayout
	    android:id="@+id/card_layout"
	    android:layout_width="fill_parent"
	    android:layout_height="280dp"
	    android:layout_below="@id/top_layout" 
	    android:background="#808080"
	    >
    	<RelativeLayout 
    	    android:layout_width="wrap_content"
    	    android:layout_height="wrap_content"
    	    android:layout_centerInParent="true">
	    <ImageView
		    android:id="@+id/btn0"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:background="@drawable/ic_launcher"/>
		    
	    
		<ImageView
		    android:id="@+id/btn1"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn0"
		    android:layout_toRightOf="@id/btn0" 
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn2"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn0"
		    android:layout_toRightOf="@id/btn1"
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn3"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn0"
		    android:layout_toRightOf="@id/btn2"
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn4"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_below="@id/btn0"
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn5"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn4"
		    android:layout_toRightOf="@id/btn4"
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn6"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn4"
		    android:layout_toRightOf="@id/btn5"
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn7"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn4"
		    android:layout_toRightOf="@id/btn6"
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn8"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_below="@id/btn4"
            android:background="@drawable/ic_launcher"/>

		
		<ImageView
		    android:id="@+id/btn9"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn8"
		    android:layout_toRightOf="@id/btn8"
            android:background="@drawable/ic_launcher"/>
		
		<ImageView
		    android:id="@+id/btn10"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn8"
		    android:layout_toRightOf="@id/btn9"
            android:background="@drawable/ic_launcher"/>
		
		<ImageView
		    android:id="@+id/btn11"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn8"
		    android:layout_toRightOf="@id/btn10"
            android:background="@drawable/ic_launcher"/>
		
		<ImageView
		    android:id="@+id/btn12"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_below="@id/btn8"
            android:background="@drawable/ic_launcher"/>
		
		<ImageView
		    android:id="@+id/btn13"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn12"
		    android:layout_toRightOf="@id/btn12"
            android:background="@drawable/ic_launcher"/>
		
		<ImageView
		    android:id="@+id/btn14"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn12"
		    android:layout_toRightOf="@id/btn13"
            android:background="@drawable/ic_launcher"/>
		
		<ImageView
		    android:id="@+id/btn15"
		    android:layout_width="55dip"
		    android:layout_height="55dip"
		    android:layout_alignTop="@id/btn12"
		    android:layout_toRightOf="@id/btn14"
            android:background="@drawable/ic_launcher"/>
				</RelativeLayout>
	</RelativeLayout>
		
	<RelativeLayout
	    android:id="@+id/btn_layout"
	    android:layout_width="fill_parent"
	    android:layout_height="wrap_content"
	    android:layout_below="@id/card_layout"
	    android:background="#333" 
	     >
		
	    <Button 
	        android:id="@+id/restart_btn"
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content"
	        android:text="Restart"
	        android:layout_marginLeft="20dp"
	        
	        />
		<Button 
	        android:id="@+id/resume_btn"
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content"
	        android:layout_toRightOf="@id/restart_btn"
	        android:text="Resume"
	        android:layout_marginLeft="10dp"
	        
	        />
	    <Button
	        android:id="@+id/pause_btn"
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content"
	        android:layout_alignParentRight="true"
	        android:layout_alignParentTop="true"
	        android:layout_marginRight="20dp"
	        android:text=" pause " 
	        
	        />
	    
	</RelativeLayout>
	
	<!-- 랭킹에 들었을때 화면 -->
	<RelativeLayout
	    android:id="@+id/rl_result"
	    android:layout_width="fill_parent"
	    android:layout_height="fill_parent"
	    android:background="@drawable/congrats"
	    android:visibility="gone"
	    >
	    
	    <EditText 
	        android:id="@+id/et_name"
	        android:layout_width="match_parent"
	        android:layout_height="wrap_content"
	        android:paddingLeft="15dp"
	        android:layout_marginLeft="15dp"
	        android:layout_marginRight="60dp"
	        android:layout_marginTop="15dp"
	        android:ems="10"
	        android:maxLength="5"
	        android:background="@drawable/round"
	        android:inputType="textMultiLine"
	        />
	    
	    <Button 
	        android:id="@+id/btn_save"
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content"
	        android:layout_below="@id/et_name"
	        android:layout_marginRight="5dip"
	        android:layout_alignParentRight="true"
	        android:background="@drawable/save_btn"
	        />
	    
	</RelativeLayout>
	
	<!-- 랭킹에 못들었을때 화면 -->
	<RelativeLayout
	    android:id="@+id/rl_result_no"
	    android:layout_width="fill_parent"
		android:layout_height="fill_parent"
	    android:background="@drawable/tryag"
	    android:visibility="gone">
	    
	    <Button 
	        android:id="@+id/btn_close"
	        android:layout_width="fill_parent"
		    android:layout_height="fill_parent"
		    />
	    
	</RelativeLayout>
</RelativeLayout>
}}}

== 메인 클래스와 xml ==

{{{
<메인클래스>
package com.example.matchinggame;

import com.example.matchinggame.utils.ManagerPreference;
import com.example.matchinggame.utils.ManagerSound;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;


public class MainActivity extends Activity implements OnClickListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ManagerPreference.make(this);
        Button startbtn = (Button)findViewById(R.id.Startbtn);
        startbtn.setOnClickListener(this); 
        
        Button optbtn = (Button)findViewById(R.id.Optbtn);
        optbtn.setOnClickListener(this); 
        
        Button rankbtn = (Button)findViewById(R.id.Rankbtn);
        rankbtn.setOnClickListener(this); 
        ManagerSound.load(this);
        
        Animation anim_logo=AnimationUtils.loadAnimation(this, R.anim.anim_logo);
        findViewById(R.id.main_logo).startAnimation(anim_logo);
    }
    @Override
    public void onResume(){
    	super.onResume();
    	if(ManagerPreference.getSound()){
            ManagerSound.playSound(this);
        }
    }
    @Override
    public void onPause(){
    	super.onPause();
    	ManagerSound.pauseSound();
    }

	@Override
	public void onClick(View v) { 
		// TODO Auto-generated method stub
		switch(v.getId()){
		
			case R.id.Startbtn : 
				Intent intent1 = new Intent(this,GameActivity.class);
				startActivity(intent1);
				break;
				
			case R.id.Optbtn :
				Intent intent2 = new Intent(this,OptionActivity.class);
				startActivity(intent2);
				break;
				
			case R.id.Rankbtn :
				Intent intent3 = new Intent(this,RankingActivity.class);
				startActivity(intent3);
				break;
		}
	}
}
}}} 

{{{
<메인 클래스 xml>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity"
    >
    
    <ImageView 
        android:alpha="0.8"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
   		android:background="@drawable/main"
    />
    
    <ImageView
        android:id="@+id/main_logo"
        android:layout_width="250dp"
        android:layout_height="100dp"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:background="@drawable/mainlogo" 
        />
        
    <Button
        android:id="@+id/Startbtn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#00000000"
        android:text="StartGame"
        android:layout_marginTop="200dp"
        />
    
    <Button
        android:id="@+id/Rankbtn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#00000000"
        android:text="Ranking" 
        android:layout_below="@id/Startbtn"
         />

    <Button
        android:id="@+id/Optbtn"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#00000000"
        android:text="Option"
        android:layout_below="@id/Rankbtn"
        />

</RelativeLayout>
}}}

== 옵션 클래스와 xml ==

{{{
<옵션클래스>
package com.example.matchinggame;

import com.example.matchinggame.utils.ManagerPreference;
import com.example.matchinggame.utils.ManagerSound;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.CompoundButton;
import android.widget.RadioGroup;
import android.widget.ToggleButton;
import android.widget.RadioGroup.OnCheckedChangeListener;

public class OptionActivity extends Activity implements OnCheckedChangeListener,android.widget.CompoundButton.OnCheckedChangeListener {

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_option);
		
		findViewById(R.id.Rankreset_btn).setOnClickListener(new OnClickListener() {
			
			@Override
			public void onClick(View arg0) {
				// TODO Auto-generated method stub
				ManagerPreference.setRankingReset();
			}
		});
		
		RadioGroup rg=(RadioGroup)findViewById(R.id.radio);
		
		switch (ManagerPreference.getCard()) {
		case 0:
			rg.check(R.id.radio_btn1);
			break;
		case 1:
			rg.check(R.id.radio_btn2);
			break;
		case 2:
			rg.check(R.id.radio_btn3);
			break;
		}
		rg.setOnCheckedChangeListener(this);
		
		ToggleButton Sonoff_btn=(ToggleButton)findViewById(R.id.Sonoff_btn);
		Sonoff_btn.setChecked(ManagerPreference.getSound());
		Sonoff_btn.setOnCheckedChangeListener(this);
	}

	@Override
	public void onCheckedChanged(RadioGroup arg0, int clickBtn) {
		// TODO Auto-generated method stub
		switch (clickBtn) {
		case R.id.radio_btn1:
			ManagerPreference.setCard(0);
			break;
		case R.id.radio_btn2:
			ManagerPreference.setCard(1);
			break;
		case R.id.radio_btn3:
			ManagerPreference.setCard(2);
			break;
		}
	}
	@Override
    public void onResume(){
    	super.onResume();
    	if(ManagerPreference.getSound()){
            ManagerSound.playSound(this);
        }
    }
    @Override
    public void onPause(){
    	super.onPause();
    	ManagerSound.pauseSound();
    }
	@Override
	public void onCheckedChanged(CompoundButton arg0, boolean isClicked) {
		// TODO Auto-generated method stub
		ManagerPreference.setSound(isClicked); // 사용자의 정보를 저장해주는 것
		if(isClicked){
			ManagerSound.playSound(this); // 저장한 정보를 실행시킬지말지를 결정해주는 것
		}else{
			ManagerSound.pauseSound();
		}
	}

}
}}}

{{{
<옵션 클래스 xml>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".OptionActivity" 
    
    >
    <ImageView 
        android:alpha="0.7"
        android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/option"/>

    <TextView
        android:id="@+id/Sound_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:layout_marginTop="40dp"
        android:text="사운드"
        android:textStyle="bold"
        />
   
    <TextView
        android:id="@+id/Image_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/Sound_btn"
        android:layout_marginLeft="40dp"
        android:layout_marginTop="40dp"
        android:text="이미지" 
        android:textStyle="bold"
        />

    <ToggleButton
        android:id="@+id/Sonoff_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/Sound_btn"
        android:layout_alignBottom="@+id/Sound_btn"
        android:layout_marginLeft="55dp"
        android:layout_toRightOf="@+id/Sound_btn"
        android:textOff="OFF"
        android:textOn="ON"
        />
    <RadioGroup 
        android:id="@+id/radio"
        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:layout_alignBaseline="@+id/Image_btn"
        android:layout_alignBottom="@+id/Image_btn"
        android:layout_marginLeft="55dp"
        android:layout_toRightOf="@+id/Sound_btn">
    <RadioButton
        android:id="@+id/radio_btn1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       
        android:text="Professor" 
        />

    <RadioButton
        android:id="@+id/radio_btn2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/radio_btn1"
        android:layout_alignLeft="@id/radio_btn1"
        android:layout_marginTop="10dp"
        android:text="Card" 
        />

    <RadioButton
        android:id="@+id/radio_btn3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/radio_btn2"
        android:layout_alignLeft="@id/radio_btn2"
        android:layout_marginTop="10dp"
        android:text="Animal" 
        />
    </RadioGroup>
    <Button 
        android:id="@+id/Rankreset_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@id/radio"
        android:layout_marginTop="150dp"
        android:text="Ranking Reset"
        />
    
   
    
 </RelativeLayout>
}}}


== 랭킹 클래스와 xml ==

{{{
package com.example.matchinggame;

import android.app.Activity;
import android.app.IntentService;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

import com.example.matchinggame.utils.ManagerPreference;
import com.example.matchinggame.utils.ManagerSound;

public class RankingActivity extends Activity implements OnClickListener {
	public static final String mPackage="com.example.matchinggame";
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_ranking);
		for(int i=0;i<7;i++){
			//TextView test=(TextView)findViewById(R.id.name_0+i); 자바에선 이런식의 표현 X
			//TextView test=(TextView)findViewById(R.id.name_0);
			// com.example.matchinggame.R.id.name_0  이렇게 일일이 써주지 않기 위해 다음과 같이 표현
			TextView tv=(TextView)findViewById(getResources().getIdentifier("name_"+i,"id",mPackage));
			tv.setText(ManagerPreference.getName(i));
			TextView tv2=(TextView)findViewById(getResources().getIdentifier("time_"+i,"id",mPackage));
			tv2.setText(ManagerPreference.getTime(i));
			
		findViewById(R.id.btn_close2).setOnClickListener(new OnClickListener() {
			
			@Override
			public void onClick(View v) {
				// TODO Auto-generated method stub
				Intent intent5 = new Intent(RankingActivity.this,MainActivity.class);
				startActivity(intent5);
				
			}
		});
		}
	}

	@Override
    public void onResume(){
    	super.onResume();
    	if(ManagerPreference.getSound()){
            ManagerSound.playSound(this);
        }
    }
    @Override
    public void onPause(){
    	super.onPause();
    	ManagerSound.pauseSound();
    }

	@Override
	public void onClick(View v) {
		// TODO Auto-generated method stub
		
	}

	
}
}}}

{{{
<랭킹 클래스 xml>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".RankingActivity" >

    <Button
        android:id="@+id/btn_close2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:alpha="0.8"
        android:background="@drawable/rank" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" >

        <TextView
            android:id="@+id/fir"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="15dp"
            android:text="1 ."
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/sec"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/fir"
            android:layout_alignTop="@+id/name_1"
            android:layout_marginRight="15dp"
            android:text="2 ."
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/thi"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/fir"
            android:layout_alignTop="@+id/name_2"
            android:layout_marginRight="15dp"
            android:text="3 ."
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/fou"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/fir"
            android:layout_alignTop="@+id/name_3"
            android:layout_marginRight="15dp"
            android:text="4 ."
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/fif"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/fir"
            android:layout_alignTop="@+id/name_4"
            android:layout_marginRight="15dp"
            android:text="5 ."
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/six"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/fir"
            android:layout_alignTop="@+id/name_5"
            android:layout_marginRight="15dp"
            android:text="6 ."
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/sev"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/fir"
            android:layout_alignTop="@+id/name_6"
            android:layout_marginRight="15dp"
            android:text="7 ."
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/name_0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/fir"
            android:text="임태휘천재"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/name_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/name_0"
            android:layout_below="@id/name_0"
            android:layout_marginTop="15dp"
            android:text="Ilovejava"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/name_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/name_1"
            android:layout_below="@id/name_1"
            android:layout_marginTop="15dp"
            android:text="자바자바자바"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/name_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/name_2"
            android:layout_below="@id/name_2"
            android:layout_marginTop="15dp"
            android:text="잡자자바"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/name_4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/name_3"
            android:layout_below="@id/name_3"
            android:layout_marginTop="15dp"
            android:text="룰루랄라뛰뛰빵빵"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/name_5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/name_4"
            android:layout_below="@id/name_4"
            android:layout_marginTop="15dp"
            android:text="정예컴교"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/name_6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/name_5"
            android:layout_below="@id/name_5"
            android:layout_marginTop="15dp"
            android:text="청년사대"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/time_0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="15dip"
            android:text="00:00:00"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/time_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@id/name_1"
            android:layout_marginRight="15dip"
            android:text="00:00:00"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/time_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@id/name_2"
            android:layout_marginRight="15dip"
            android:text="00:00:00"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/time_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@id/name_3"
            android:layout_marginRight="15dip"
            android:text="00:00:00"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/time_4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@id/name_4"
            android:layout_marginRight="15dip"
            android:text="00:00:00"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/time_5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@id/name_5"
            android:layout_marginRight="15dip"
            android:text="00:00:00"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/time_6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@id/name_6"
            android:layout_marginRight="15dip"
            android:text="00:00:00"
            android:textColor="#FFFFFF"
            android:textSize="20sp"
            android:textStyle="bold" />
    </RelativeLayout>

</RelativeLayout>
}}}

== 카드 매니저 클래스 ==

{{{
package com.example.matchinggame.game;

import com.example.matchinggame.R;

import android.widget.ImageView;

public class CardManager {
	private int value;
	private ImageView iv;
	private int ImageSource;
	private boolean canTouch; // 현재 터치한 위치를 다시 터치할 수 없게 하기 위한 변수

	/**
	 * i 는 GameActivity 내에서의 카드 위치에 해당하는 값
	 * v 카드의 value (양, 소 , 토끼것의 값)
	 * imageView (layout xml의 이미지 뷰의 위치 값)
	 * ImageSource (양, 소 , 토끼 등의 값의 이미지 drawable 내의 카드 그림에 해당하는 값);
	 */
	public CardManager(int i,int v,ImageView imageView,int is){ //카드 매니저의 생성자
		
		value=v;
		iv=imageView;
		iv.setTag(i);
		ImageSource=is;
		canTouch=true;
	}
	
	public ImageView getImageView(){
		return iv;
	}
	
	public int getValue(){
		return value;
	}
	
	/**
	 * 게임 진행 중 동작과 관련된 이미지 설정 메소드
	 * isBack 이 true 면 카드의 뒷면(내용)을 보여주고, false 면 카드의 앞면(가리개 카드)을 보여줌.
	 */
	public void setImage(boolean isBack){

			if(isBack){
				iv.setBackgroundResource(ImageSource);

			}else{
				iv.setBackgroundResource(R.drawable.card_back);
				canTouch=true;
			}
	}
	
	/**
	 * 게임 진행 중 터치 시 카드의 동작과 관련된 메소드
	 * isBack 이 true 인 경우 뒷면을 보여주면서 해당 위치의 카드는 터치 불가능하게 설정
	 * isBack 이 false 인 경우 그대로 앞면을 보여주면서 해당 위치의 카드를 터치가 가능한 상태로 설정 
	 * */
	public boolean turnCard(boolean isBack){
		if(canTouch){
			if(isBack){
				iv.setBackgroundResource(ImageSource);
				canTouch=false;
			}else{ 
				iv.setBackgroundResource(R.drawable.card_back);
				canTouch=true;
			}
			return true;
		}
		return false;
	}
}
}}}


== 게임 매니저 클래스 ==

{{{
package com.example.matchinggame.game;

public class GameManager {
	public static final int CORRECT_ALL=8;
	public int nowCorrect=0; // 현재 맞춘 카드 쌍의 개수
	public static final int MAX_TURN_CARD=2;
	private int nowTurnCount=0; // 현재 몇 장의 카드를 넘겼나에 해당하는 변수
	
	private int firstCardValue=-1; //첫 번째 누른 카드와 두 번째 누른 카드의 비교를 위한 변수들
	private int secondCardValue=-1;
	private int firstCardNum=-1;
	private int secondCardNum=-1;
	
	/**
	 * 카드를 넘길 수 있는지에 여부를 알려주는 메소드
	 * 2장 이상을 넘길 수 없다. 
	 * */
	public boolean canTurnCard(){
		if(nowTurnCount==MAX_TURN_CARD){
			return false;
		}
		return true;
	}
	
	/**
	 *게임 중 카드를 누르게되면 
	 *누른 카드의 정보를 저장해주는 메소드 
	 * */
	public void turnCard(int nowTouchCardNum,int nowTouchedCardImageValue){
		if(nowTurnCount==0){
			firstCardNum=nowTouchCardNum;
			firstCardValue=nowTouchedCardImageValue;
		}
		if(nowTurnCount==1){
			secondCardNum=nowTouchCardNum;
			secondCardValue=nowTouchedCardImageValue;
		}
		nowTurnCount++;
	}
	
	/**
	 * 모든 카드가 맞춰진 경우를 알려주는 메소드
	 * */
	public boolean isAllCorrect(){
		if(nowCorrect==CORRECT_ALL){
			return true;
		}
		
		return false;
	}
	
	/**
	 * 뒤집은 2장의 카드에 대한 동작을 위한 메소드
	 * 맞춘 경우 : 그대로 놔둠, 틀린 경우 : 카드의 뒷면으로 뒤집기 
	 * */
	public boolean needToReturnCard(){
		if(nowTurnCount==2){
			if(firstCardValue==secondCardValue){
				nowTurnCount=0;
				nowCorrect++;
			}else{
				
				return true;
			}
		}
		return false;
	}
	
	/**
	 * 현재 뒤집은 카드의 위치가 뭔지 알려주는 함수
	 * @return
	 */
	public int[] getTurnCardNum(){
		int[] temp={firstCardNum,secondCardNum};
		return temp;
	}
	
	/**
	 * 터치했을 때 카드의 동작 가능 상태로 변경해주는 메소드
	 * */
	public void canTouchCard() {
		nowTurnCount=0;
		
	}

}
}}}


== 난수 생성 클래스 ==

{{{
package com.example.matchinggame.game;

import java.util.Random;

public class GenerateRandom {
	
	public static int[] getRandom(int SIZE){
		
		int[] randList=new int[SIZE];
		Random r=new Random();
		
		for(int i=0;i<randList.length;i++){
			
			while(true){
				
				int value=r.nextInt(SIZE); //size 내의 수를 랜덤하게  생성
				boolean inFlag=true; // 랜덤하게 생성시킨  값이 이전의 생성값과 같은 경우 false
				
				for(int j=0;j<i;j++){ // 기존의 randList[i]에 value 를 넣고  randList[j]를 통해  
					if(randList[j]==value){ //앞에서부터 비교하여 현재 randList[i]의 위치에 동일한 값이 들어가지 않도록 해줌. 
						inFlag=false;
					}
				}
				if(inFlag){ // 동일한지 여부가 판별되어 이전의 숫자들과 다른 값인 경우 randList[i]에 대입
					randList[i]=value;
					break;
				}
			}
		}
		return randList;
	}
}
}}}


== 타임 매니저 클래스 ==

{{{
package com.example.matchinggame.game;

public class TimeManager {
	
	long startTime = 0;
	long pauseTime =0;
	
	/**
	 * 시작 시간을 저장
	 */
	public void startGame() {
		startTime = System.currentTimeMillis(); // 게임이 시작되면 시작시간에 현재시간을 대입
	}
	/**
	 * 현재시간을 가져오는 함수
	 * @return
	 */
	public String getNowTime() {
		return String.format("%.3f",(float)(System.currentTimeMillis() - startTime)/1000); 
	} // 현재시간에서 이전에 저장해놓은 시간을 빼서 걸린 시간을 return
	/**
	 * 일시정지 함수
	 */
	public void pauseTime(){
		pauseTime = System.currentTimeMillis(); // pause시 현재 시간을 대입
	}
	/**
	 * 재시작 하는 함수
	 */
	public void resumeTime(){
		startTime+=System.currentTimeMillis()-pauseTime; 
	} // pause시 시간과 현재시간의 관계를 이용하여 startTime을 새로 설정

}
}}}


== 매니저 프리퍼런스 클래스 ==

{{{
package com.example.matchinggame.utils;

import android.app.Activity;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;

public class ManagerPreference {
	private static ManagerPreference singleton = null; 
	// Preference 관리자는 하나만  있다는 뜻, 객체가 해당 정보를 가지고
	//있어야 하므로 생성한 뒤 계속 살아있게  한  것이다.
	
	private static SharedPreferences prefs = null; // 실제 관리하는 sharedPreference
	private static final String TEMP_NAME = "나잡아봐라";

	private ManagerPreference(Activity act) {
		prefs = PreferenceManager.getDefaultSharedPreferences(act); 
		// pref의 생성자이며, 기본적으로  선언되는 부분 
	}

	/**
	 * ManagerPreference를 생성하는 함수 맨 처음 어플 실행 시 한번 호출 생성자
	 */
	public static ManagerPreference make(Activity act) {
		singleton = new ManagerPreference(act);
		return singleton;
	}

	/**
	 * 결과값이 랭킹에 진입하였는지 여부 확인하는 함수
	 */
	public static boolean isInRanking(float nowTime) { 
		// 게임 기록이 랭킹 안에 드는지 알려주는 메소드
		
		if (nowTime < prefs.getFloat("rankTime" + 6, 1000f)) {
			return true;
		}
		return false;

	}

	/**
	 * 랭킹을 등록하는 함수
	 */
	public static void setRank(String name, float nowTime) {
		int nowRank = 0;

		for (int i = 0; i < 7; i++) { // 현재 기록이 랭킹 내에서 몇 번째인지 검사
			if (nowTime >= prefs.getFloat("rankTime" + i, 1000f)) {
				nowRank = i + 1;
			}
		}
		for (int i = 5; i >= nowRank; i--) { 
			// 현재 기록이 들어갈 랭킹 번째 수까지 뒤로 복사해서 붙여 넣어주는 역할
			
			SharedPreferences.Editor editor = prefs.edit();
			editor.putString("rankName" + (i + 1),
					prefs.getString("rankName" + i, TEMP_NAME));
			editor.putFloat("rankTime" + (i + 1),
					prefs.getFloat("rankTime" + i, 1000f));
			editor.commit();
		}

		SharedPreferences.Editor editor = prefs.edit(); 
		// 현재 기록의 랭킹 란에 이름과 기록을  넣어줌.
		
		editor.putString("rankName" + nowRank, name);
		editor.putFloat("rankTime" + nowRank, nowTime);
		editor.commit();

	}

	/**
	 * num에 해당하는 랭킹의 이름을 갖고오는 함수
	 */
	public static String getName(int num) {
		return prefs.getString("rankName" + num, TEMP_NAME);
	}

	/**
	 * num에 해당하는 랭킹의 시간을 갖고오는 함수
	 */
	public static String getTime(int num) {
		return Float.toString(prefs.getFloat("rankTime" + num, 1000f));
	}

	/**
	 * 랭킹을 초기화하는 함수
	 */
	public static void setRankingReset() {
		for (int i = 0; i < 7; i++) {
			SharedPreferences.Editor editor = prefs.edit();
			editor.putString("rankName" + i, TEMP_NAME);
			editor.putFloat("rankTime" + i, 1000f);
			editor.commit();
		}
	}

	/**
	 * 사용자가 쓸 카드를 지정
	 */
	public static void setCard(int i) {
		SharedPreferences.Editor editor = prefs.edit();
		editor.putInt("card", i);
		editor.commit();
	}

	/**
	 * 사용자가 쓸 카드 정보를 가져옴
	 * 
	 * @return 교수님//카드//동물
	 */
	public static int getCard() {
		return prefs.getInt("card", 0);
	}

	/**
	 * 사용자가 사운드를 사용할지를 결정
	 */
	public static void setSound(boolean b) {
		SharedPreferences.Editor editor = prefs.edit();
		editor.putBoolean("sound", b);
		editor.commit();
	}

	/**
	 * 사용자가 사운드를 사용하는지 여부를 판단
	 */
	public static boolean getSound() {
		return prefs.getBoolean("sound", true);
	}
}
}}}


== 매니저 사운드 클래스 ==

{{{
package com.example.matchinggame.utils;

import com.example.matchinggame.R;

import android.content.Context;
import android.media.MediaPlayer;

public class ManagerSound {
	private static ManagerSound singleton = null; 
	// 노래 관리자는 어플에서 단 하나만 써야하기 때문에 싱글톤으로 구현하였음.
	private static MediaPlayer mPlayer = null; // 실제 음악을 재생하는 Media Player

	/**
	 * 맨 처음 노래를 로드하는 함수 버퍼링
	 */
	public synchronized static void load(Context context) {
		if (singleton == null) {
			singleton = new ManagerSound(context);
		}
	}

	private ManagerSound(Context context) { // mPlayer의 생성자
		super();
		mPlayer = MediaPlayer.create(context, R.raw.sound);
	}

	/**
	 * 노래를 재생하는 함수
	 */
	public synchronized static void playSound(Context context) {
		if (mPlayer == null) {
			mPlayer = MediaPlayer.create(context, R.raw.sound); 
			
			// mPlayer가 혹시  안 만들어졌을 경우 만들어주는 함수
		}
		mPlayer.start();
	}

	/**
	 * 노래를 멈추는 함수
	 */
	public synchronized static void pauseSound() {
		mPlayer.pause();
	}

}
}}}



= 참고 문헌 및 사이트 =

 * 카드 게임 논리 참고 : http://manong.tistory.com/199
 
 * Do it! 안드로이드 앱 프로그래밍(이지스퍼블리싱) - 교수님 추천 도서
  
  - 오디오 재생, 레이아웃 구성, 핸들러 사용, 애니메이션 구현, 카드 눌렀을 때 이미지 변환, 텍스트 상자 띄우기 등을 구성하는데 참고함.(대부분 여기서 내용과 검색 내용을 참조하였다.) 

 * 핸들러를 이용한 타이머 참고 : http://androidmetro.blogspot.kr/2011/06/blog-post_23.html

 * 랭킹 사항 저장, 카드 변경 사항 저장, 사운드 세팅 및 변경 사항 등을 DB를 사용하지 않고 영속적으로 저장하기 위한 Shared Preferences 구성 참고 : http://blog.naver.com/PostView.nhn?blogId=ljsk139&logNo=30177409995<br>http://muzesong.tistory.com/entry/%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-SharedPreferences-%EA%B9%94%EB%81%94%ED%95%98%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0


= 어플리케이션 소스 파일 압축 자료 및 apk파일=


 * 어플리케이션 소스 파일 압축 자료

http://comp166-koreauniv.googlecode.com/files/MatchingGame(3).zip


 * 프로그램의 실행만을 원하시면 apk파일을 다운받아주세요.




 

 